<html><head><link rel="import" href="../iron-form-element-behavior/iron-form-element-behavior.html">
<link rel="import" href="../iron-validatable-behavior/iron-validatable-behavior.html">
<link rel="import" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html">

<script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.datepicker=vaadin.elements.datepicker||{},vaadin.elements.datepicker.DatePickerBehaviorImpl={observers:["_selectedDateChanged(_selectedDate, i18n.formatDate)"],properties:{_selectedDate:{type:Date},value:{type:String,observer:"_valueChanged"},hasValue:{type:Boolean,computed:"_hasValue(value)",reflectToAttribute:!0},initialPosition:String,label:String,opened:{type:Boolean,reflectToAttribute:!0},_fullscreen:{value:!1,observer:"_fullscreenChanged"},_fullscreenMediaQuery:{value:"(max-width: 420px), (max-height: 420px)"},_touchPrevented:Array,i18n:{type:Object,value:function(){return{monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],firstDayOfWeek:0,today:"Today",cancel:"Cancel",formatDate:function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()},formatTitle:function(e,t){return e+" "+t}}}}},created:function(){this._boundOnScroll=this._onScroll.bind(this)},listeners:{tap:"open",touchend:"_preventDefault",keydown:"_onKeydown"},ready:function(){void 0===this.value&&(this.value="")},open:function(e){this._updateAlignmentAndPosition(),this.disabled||this.readonly||e&&!(Polymer.dom(e).path.indexOf(this.$.overlay)<0)||this.$.dropdown.open()},close:function(){this.$.dropdown.close()},get inputElement(){return this._input()},_parseDate:function(e){var t=/^(\d{4}|[-+]\d{6})-(\d{2})-(\d{2})$/.exec(e);if(t){var n=new Date(0,0);return n.setFullYear(parseInt(t[1],10)),n.setMonth(parseInt(t[2],10)-1),n.setDate(parseInt(t[3],10)),n}},_formatISO:function(e){return e instanceof Date?new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0]:""},_selectedDateChanged:function(e){this.value=this._formatISO(e),this._inputValue=e?this.i18n.formatDate(e):""},_hasValue:function(e){return!!e},_valueChanged:function(e,t){if(!e)return void(this._selectedDate=null);var n=this._parseDate(e);return n?void(this._selectedDate instanceof Date&&n.getFullYear()===this._selectedDate.getFullYear()&&n.getMonth()===this._selectedDate.getMonth()&&n.getDate()===this._selectedDate.getDate()||(this._selectedDate=n)):void(this.value=t)},_updateAlignmentAndPosition:function(){var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0);this.$.dropdown.positionTarget=this._fullscreen?document.documentElement:this;var t=Math.max(document.documentElement.clientHeight,window.innerHeight||0),n=this.getBoundingClientRect().top>t/2,i=this.getBoundingClientRect().left+this.clientWidth/2>e/2;this.$.dropdown.verticalAlign=n?"bottom":"top",this.$.dropdown.horizontalAlign=this._fullscreen?null:i?"right":"left",this._fullscreen?(this.$.dropdown.style.marginTop=0,this.$.dropdown.style.marginBottom=0):(this.$.dropdown.style.marginTop=(n?10:this.clientHeight+2)+"px",this.$.dropdown.style.marginBottom=(n?this.clientHeight:10)+"px"),this.$.dropdown.refit()},_fullscreenChanged:function(){this.$.dropdown.opened&&this._updateAlignmentAndPosition()},_onOverlayOpened:function(){this.$.overlay.initialPosition=this._selectedDate||this.$.overlay.initialPosition||this._parseDate(this.initialPosition)||new Date,this.$.overlay.scrollToDate(this.$.overlay.focusedDate||this.$.overlay.initialPosition),window.addEventListener("scroll",this._boundOnScroll,!0),window.addEventListener("resize",this._boundOnScroll,!0),""===document.createElement("div").style.webkitOverflowScrolling&&(this._touchPrevented=this._preventWebkitOverflowScrollingTouch(this.parentElement)),this.$.overlay.focus(),this.updateStyles()},_preventWebkitOverflowScrollingTouch:function(e){for(var t=[];e;){if("touch"===window.getComputedStyle(e).webkitOverflowScrolling){var n=e.style.webkitOverflowScrolling;e.style.webkitOverflowScrolling="auto",t.push({element:e,oldInlineValue:n})}e=e.parentElement}return t},_onOverlayClosed:function(){window.removeEventListener("scroll",this._boundOnScroll,!0),window.removeEventListener("resize",this._boundOnScroll,!0),this._focus(),this._touchPrevented&&(this._touchPrevented.forEach(function(e){e.element.style.webkitOverflowScrolling=e.oldInlineValue}),this._touchPrevented=[]),this.updateStyles()},detached:function(){this._onOverlayClosed()},_onScroll:function(e){e.target!==window&&this.$.overlay.contains(e.target)||(this.$.dropdown.style.bottom="auto",this.$.dropdown.resetFit(),this._updateAlignmentAndPosition(),this.$.dropdown.fire("iron-resize"))},_preventCancelOnComponentAccess:function(e){var t=Polymer.dom(e.detail);/tap|mousedown|touchstart/.test(e.detail.type)&&t.path.indexOf(this)>-1&&e.preventDefault()},_focus:function(){this.inputElement.focus()},_preventDefault:function(e){e.preventDefault()},_eventKey:function(e){for(var t=["down","up"],n=0;n<t.length;n++){var i=t[n];if(Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(e,i))return i}},_onKeydown:function(e){switch(this._eventKey(e)){case"down":case"up":e.preventDefault(),this.opened||this.open()}}},vaadin.elements.datepicker.DatePickerBehavior=[Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior,Polymer.IronA11yKeysBehavior,vaadin.elements.datepicker.DatePickerBehaviorImpl];</script>
</head><body></body></html>