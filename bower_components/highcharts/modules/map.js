!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){function i(t,i){var o,e,a,n,s=!1,r=t.x,l=t.y;for(o=0,e=i.length-1;o<i.length;e=o++)a=i[o][1]>l,n=i[e][1]>l,a!==n&&r<(i[e][0]-i[o][0])*(l-i[o][1])/(i[e][1]-i[o][1])+i[o][0]&&(s=!s);return s}function o(t,i,o,e,a,n,s,r){return["M",t+a,i,"L",t+o-n,i,"C",t+o-n/2,i,t+o,i+n/2,t+o,i+n,"L",t+o,i+e-s,"C",t+o,i+e-s/2,t+o-s/2,i+e,t+o-s,i+e,"L",t+r,i+e,"C",t+r/2,i+e,t,i+e-r/2,t,i+e-r,"L",t,i+a,"C",t,i+a/2,t+a/2,i,t+a,i,"Z"]}var e=t.Axis,a=t.Chart,n=t.Color,s=t.Point,r=t.Pointer,l=t.Legend,h=t.LegendSymbolMixin,p=t.Renderer,c=t.Series,m=t.SVGRenderer,d=t.VMLRenderer,u=t.win,f=u.document,g=t.addEvent,x=t.each,y=t.error,v=t.extend,b=t.extendClass,A=t.merge,M=t.pick,w=t.getOptions(),C=t.seriesTypes,L=w.plotOptions,P=t.wrap,X=function(){};P(e.prototype,"getSeriesExtremes",function(t){var i,o,e,a=this.isXAxis,n=[];a&&x(this.series,function(t,i){t.useMapGeometry&&(n[i]=t.xData,t.xData=[])}),t.call(this),a&&(i=M(this.dataMin,Number.MAX_VALUE),o=M(this.dataMax,-Number.MAX_VALUE),x(this.series,function(t,a){t.useMapGeometry&&(i=Math.min(i,M(t.minX,i)),o=Math.max(o,M(t.maxX,i)),t.xData=n[a],e=!0)}),e)&&(this.dataMin=i,this.dataMax=o)}),P(e.prototype,"setAxisTranslation",function(t){var i,o=this.chart,e=o.plotWidth/o.plotHeight,o=o.xAxis[0];t.call(this),"yAxis"===this.coll&&void 0!==o.transA&&x(this.series,function(t){t.preserveAspectRatio&&(i=!0)}),i&&(this.transA=o.transA=Math.min(this.transA,o.transA),t=e/((o.max-o.min)/(this.max-this.min)),t=1>t?this:o,e=(t.max-t.min)*t.transA,t.pixelPadding=t.len-e,t.minPixelPadding=t.pixelPadding/2,e=t.fixTo)&&(e=e[1]-t.toValue(e[0],!0),e*=t.transA,(Math.abs(e)>t.minPixelPadding||t.min===t.dataMin&&t.max===t.dataMax)&&(e=0),t.minPixelPadding-=e)}),P(e.prototype,"render",function(t){t.call(this),this.fixTo=null});var T=t.ColorAxis=function(){this.isColorAxis=!0,this.init.apply(this,arguments)};v(T.prototype,e.prototype),v(T.prototype,{defaultColorAxisOptions:{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},color:"gray",width:.01},labels:{overflow:"justify"},minColor:"#EFEFFF",maxColor:"#003875",tickLength:5},init:function(t,i){var o,a="vertical"!==t.options.legend.layout;o=A(this.defaultColorAxisOptions,{side:a?2:1,reversed:!a},i,{opposite:!a,showEmpty:!1,title:null,isColor:!0}),e.prototype.init.call(this,t,o),i.dataClasses&&this.initDataClasses(i),this.initStops(i),this.horiz=a,this.zoomEnabled=!1},tweenColors:function(t,i,o){var e;return i.rgba.length&&t.rgba.length?(t=t.rgba,i=i.rgba,e=1!==i[3]||1!==t[3],t=(e?"rgba(":"rgb(")+Math.round(i[0]+(t[0]-i[0])*(1-o))+","+Math.round(i[1]+(t[1]-i[1])*(1-o))+","+Math.round(i[2]+(t[2]-i[2])*(1-o))+(e?","+(i[3]+(t[3]-i[3])*(1-o)):"")+")"):t=i.input||"none",t},initDataClasses:function(t){var i,o=this,e=this.chart,a=0,s=this.options,r=t.dataClasses.length;this.dataClasses=i=[],this.legendItems=[],x(t.dataClasses,function(t,l){var h,t=A(t);i.push(t),t.color||("category"===s.dataClassColor?(h=e.options.colors,t.color=h[a++],a===h.length&&(a=0)):t.color=o.tweenColors(n(s.minColor),n(s.maxColor),2>r?.5:l/(r-1)))})},initStops:function(t){this.stops=t.stops||[[0,this.options.minColor],[1,this.options.maxColor]],x(this.stops,function(t){t.color=n(t[1])})},setOptions:function(t){e.prototype.setOptions.call(this,t),this.options.crosshair=this.options.marker,this.coll="colorAxis"},setAxisSize:function(){var t,i,o,e=this.legendSymbol,a=this.chart;e&&(this.left=t=e.attr("x"),this.top=i=e.attr("y"),this.width=o=e.attr("width"),this.height=e=e.attr("height"),this.right=a.chartWidth-t-o,this.bottom=a.chartHeight-i-e,this.len=this.horiz?o:e,this.pos=this.horiz?t:i)},toColor:function(t,i){var o,e,a,n,s=this.stops,r=this.dataClasses;if(r){for(n=r.length;n--;)if(a=r[n],e=a.from,s=a.to,(void 0===e||t>=e)&&(void 0===s||s>=t)){o=a.color,i&&(i.dataClass=n);break}}else{for(this.isLog&&(t=this.val2lin(t)),o=1-(this.max-t)/(this.max-this.min||1),n=s.length;n--&&!(o>s[n][0]););e=s[n]||s[n+1],s=s[n+1]||e,o=1-(s[0]-o)/(s[0]-e[0]||1),o=this.tweenColors(e.color,s.color,o)}return o},getOffset:function(){var t=this.legendGroup,i=this.chart.axisOffset[this.side];t&&(this.axisParent=t,e.prototype.getOffset.call(this),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=i)},setLegendColor:function(){var t,i=this.options,o=this.reversed;t=o?1:0,o=o?0:1,t=this.horiz?[t,0,o,0]:[0,o,0,t],this.legendColor={linearGradient:{x1:t[0],y1:t[1],x2:t[2],y2:t[3]},stops:i.stops||[[0,i.minColor],[1,i.maxColor]]}},drawLegendSymbol:function(t,i){var o=t.padding,e=t.options,a=this.horiz,n=M(e.symbolWidth,a?200:12),s=M(e.symbolHeight,a?12:200),r=M(e.labelPadding,a?16:30),e=M(e.itemDistance,10);this.setLegendColor(),i.legendSymbol=this.chart.renderer.rect(0,t.baseline-11,n,s).attr({zIndex:1}).add(i.legendGroup),this.legendItemWidth=n+o+(a?e:r),this.legendItemHeight=s+o+(a?r:0)},setState:X,visible:!0,setVisible:X,getSeriesExtremes:function(){var t;this.series.length&&(t=this.series[0],this.dataMin=t.valueMin,this.dataMax=t.valueMax)},drawCrosshair:function(t,i){var o,a=i&&i.plotX,n=i&&i.plotY,s=this.pos,r=this.len;i&&(o=this.toPixels(i[i.series.colorKey]),s>o?o=s-2:o>s+r&&(o=s+r+2),i.plotX=o,i.plotY=this.len-o,e.prototype.drawCrosshair.call(this,t,i),i.plotX=a,i.plotY=n,this.cross&&this.cross.attr({fill:this.crosshair.color}).add(this.legendGroup))},getPlotLinePath:function(t,i,o,a,n){return"number"==typeof n?this.horiz?["M",n-4,this.top-6,"L",n+4,this.top-6,n,this.top,"Z"]:["M",this.left,n,"L",this.left-6,n+6,this.left-6,n-6,"Z"]:e.prototype.getPlotLinePath.call(this,t,i,o,a)},update:function(t,i){var o=this.chart,a=o.legend;x(this.series,function(t){t.isDirtyData=!0}),t.dataClasses&&a.allItems&&(x(a.allItems,function(t){t.isDataClass&&t.legendGroup.destroy()}),o.isDirtyLegend=!0),o.options[this.coll]=A(this.userOptions,t),e.prototype.update.call(this,t,i),this.legendItem&&(this.setLegendColor(),a.colorizeItem(this,!0))},getDataClassLegendSymbols:function(){var i,o=this,e=this.chart,a=this.legendItems,n=e.options.legend,s=n.valueDecimals,r=n.valueSuffix||"";return a.length||x(this.dataClasses,function(n,l){var p=!0,c=n.from,m=n.to;i="",void 0===c?i="< ":void 0===m&&(i="> "),void 0!==c&&(i+=t.numberFormat(c,s)+r),void 0!==c&&void 0!==m&&(i+=" - "),void 0!==m&&(i+=t.numberFormat(m,s)+r),a.push(v({chart:e,name:i,options:{},drawLegendSymbol:h.drawRectangle,visible:!0,setState:X,isDataClass:!0,setVisible:function(){p=this.visible=!p,x(o.series,function(t){x(t.points,function(t){t.dataClass===l&&t.setVisible(p)})}),e.legend.colorizeItem(this,p)}},n))}),a},name:""}),x(["fill","stroke"],function(i){t.Fx.prototype[i+"Setter"]=function(){this.elem.attr(i,T.prototype.tweenColors(n(this.start),n(this.end),this.pos))}}),P(a.prototype,"getAxes",function(t){var i=this.options.colorAxis;t.call(this),this.colorAxis=[],i&&new T(this,i)}),P(l.prototype,"getAllItems",function(t){var i=[],o=this.chart.colorAxis[0];return o&&(o.options.dataClasses?i=i.concat(o.getDataClassLegendSymbols()):i.push(o),x(o.series,function(t){t.options.showInLegend=!1})),i.concat(t.call(this))});var l={setVisible:function(t){var i=this,o=t?"show":"hide";x(["graphic","dataLabel"],function(t){i[t]&&i[t][o]()})}},D={pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",dashstyle:"dashStyle"},pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:X,parallelArrays:["x","y","value"],colorKey:"value",translateColors:function(){var t=this,i=this.options.nullColor,o=this.colorAxis,e=this.colorKey;x(this.data,function(a){var n=a[e];(n=a.options.color||(null===n?i:o&&void 0!==n?o.toColor(n,a):a.color||t.color))&&(a.color=n)})}};v(a.prototype,{renderMapNavigation:function(){var t,i,o,e,a=this,n=this.options.mapNavigation,s=n.buttons,r=function(t){t&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},l=function(t){this.handler.call(a,t),r(t)};if(M(n.enableButtons,n.enabled)&&!a.renderer.forExport)for(t in s)s.hasOwnProperty(t)&&(o=A(n.buttonOptions,s[t]),i=o.theme,i.style=A(o.theme.style,o.style),e=i.states,i=a.renderer.button(o.text,0,0,l,i,e&&e.hover,e&&e.select,0,"zoomIn"===t?"topbutton":"bottombutton").attr({width:o.width,height:o.height,title:a.options.lang[t],zIndex:5}).add(),i.handler=o.onclick,i.align(v(o,{width:i.width,height:2*i.height}),null,o.alignTo),g(i.element,"dblclick",r))},fitToBox:function(t,i){return x([["x","width"],["y","height"]],function(o){var e=o[0],o=o[1];t[e]+t[o]>i[e]+i[o]&&(t[o]>i[o]?(t[o]=i[o],t[e]=i[e]):t[e]=i[e]+i[o]-t[o]),t[o]>i[o]&&(t[o]=i[o]),t[e]<i[e]&&(t[e]=i[e])}),t},mapZoom:function(t,i,o,e,a){var n=this.xAxis[0],s=n.max-n.min,r=M(i,n.min+s/2),l=s*t,s=this.yAxis[0],h=s.max-s.min,p=M(o,s.min+h/2);h*=t,r=this.fitToBox({x:r-l*(e?(e-n.pos)/n.len:.5),y:p-h*(a?(a-s.pos)/s.len:.5),width:l,height:h},{x:n.dataMin,y:s.dataMin,width:n.dataMax-n.dataMin,height:s.dataMax-s.dataMin}),e&&(n.fixTo=[e-n.pos,i]),a&&(s.fixTo=[a-s.pos,o]),void 0!==t?(n.setExtremes(r.x,r.x+r.width,!1),s.setExtremes(r.y,r.y+r.height,!1)):(n.setExtremes(void 0,void 0,!1),s.setExtremes(void 0,void 0,!1)),this.redraw()}}),P(a.prototype,"render",function(t){var i=this,o=i.options.mapNavigation;i.renderMapNavigation(),t.call(i),(M(o.enableDoubleClickZoom,o.enabled)||o.enableDoubleClickZoomTo)&&g(i.container,"dblclick",function(t){i.pointer.onContainerDblClick(t)}),M(o.enableMouseWheelZoom,o.enabled)&&g(i.container,void 0===f.onmousewheel?"DOMMouseScroll":"mousewheel",function(t){return i.pointer.onContainerMouseWheel(t),!1})}),v(r.prototype,{onContainerDblClick:function(t){var i=this.chart,t=this.normalize(t);i.options.mapNavigation.enableDoubleClickZoomTo?i.pointer.inClass(t.target,"highcharts-tracker")&&i.hoverPoint.zoomTo():i.isInsidePlot(t.chartX-i.plotLeft,t.chartY-i.plotTop)&&i.mapZoom(.5,i.xAxis[0].toValue(t.chartX),i.yAxis[0].toValue(t.chartY),t.chartX,t.chartY)},onContainerMouseWheel:function(t){var i,o=this.chart,t=this.normalize(t);i=t.detail||-(t.wheelDelta/120),o.isInsidePlot(t.chartX-o.plotLeft,t.chartY-o.plotTop)&&o.mapZoom(Math.pow(2,i),o.xAxis[0].toValue(t.chartX),o.yAxis[0].toValue(t.chartY),t.chartX,t.chartY)}}),P(r.prototype,"init",function(t,i,o){t.call(this,i,o),M(o.mapNavigation.enableTouchZoom,o.mapNavigation.enabled)&&(this.pinchX=this.pinchHor=this.pinchY=this.pinchVert=this.hasZoom=!0)}),P(r.prototype,"pinchTranslate",function(t,i,o,e,a,n,s){t.call(this,i,o,e,a,n,s),"map"===this.chart.options.chart.type&&this.hasZoom&&(t=e.scaleX>e.scaleY,this.pinchTranslateDirection(!t,i,o,e,a,n,s,t?e.scaleX:e.scaleY))});var Y=void 0!==f.documentElement.style.vectorEffect;L.map=A(L.scatter,{allAreas:!0,animation:!1,nullColor:"#F8F8F8",borderColor:"silver",borderWidth:1,marker:null,stickyTracking:!1,dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},turboThreshold:0,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{brightness:.2,halo:null}}});var k=b(s,v({applyOptions:function(t,i){var o=s.prototype.applyOptions.call(this,t,i),e=this.series,a=e.joinBy;return e.mapData&&((a=void 0!==o[a[1]]&&e.mapMap[o[a[1]]])?(e.xyFromShape&&(o.x=a._midX,o.y=a._midY),v(o,a)):o.value=o.value||null),o},onMouseOver:function(t){clearTimeout(this.colorInterval),null!==this.value?s.prototype.onMouseOver.call(this,t):this.series.onMouseOut(t)},onMouseOut:function(){var t,i=this,o=+new Date,e=n(i.color),a=n(i.pointAttr.hover.fill),r=i.series.options.states.normal.animation,l=r&&(r.duration||500);l&&4===e.rgba.length&&4===a.rgba.length&&"select"!==i.state&&(t=i.pointAttr[""].fill,delete i.pointAttr[""].fill,clearTimeout(i.colorInterval),i.colorInterval=setInterval(function(){var t=(new Date-o)/l,n=i.graphic;t>1&&(t=1),n&&n.attr("fill",T.prototype.tweenColors.call(0,a,e,t)),t>=1&&clearTimeout(i.colorInterval)},13)),s.prototype.onMouseOut.call(i),t&&(i.pointAttr[""].fill=t)},zoomTo:function(){var t=this.series;t.xAxis.setExtremes(this._minX,this._maxX,!1),t.yAxis.setExtremes(this._minY,this._maxY,!1),t.chart.redraw()}},l));C.map=b(C.scatter,A(D,{type:"map",pointClass:k,supportsDrilldown:!0,getExtremesFromAll:!0,useMapGeometry:!0,forceDL:!0,searchPoint:X,directTouch:!0,preserveAspectRatio:!0,getBox:function(i){var o,e=Number.MAX_VALUE,a=-e,n=e,s=-e,r=e,l=e,h=this.xAxis,p=this.yAxis;x(i||[],function(i){if(i.path){"string"==typeof i.path&&(i.path=t.splitPath(i.path));var h=i.path||[],p=h.length,c=!1,m=-e,d=e,u=-e,f=e,g=i.properties;if(!i._foundBox){for(;p--;)"number"==typeof h[p]&&!isNaN(h[p])&&(c?(m=Math.max(m,h[p]),d=Math.min(d,h[p])):(u=Math.max(u,h[p]),f=Math.min(f,h[p])),c=!c);i._midX=d+(m-d)*(i.middleX||g&&g["hc-middle-x"]||.5),i._midY=f+(u-f)*(i.middleY||g&&g["hc-middle-y"]||.5),i._maxX=m,i._minX=d,i._maxY=u,i._minY=f,i.labelrank=M(i.labelrank,(m-d)*(u-f)),i._foundBox=!0}a=Math.max(a,i._maxX),n=Math.min(n,i._minX),s=Math.max(s,i._maxY),r=Math.min(r,i._minY),l=Math.min(i._maxX-i._minX,i._maxY-i._minY,l),o=!0}}),o&&(this.minY=Math.min(r,M(this.minY,e)),this.maxY=Math.max(s,M(this.maxY,-e)),this.minX=Math.min(n,M(this.minX,e)),this.maxX=Math.max(a,M(this.maxX,-e)),h&&void 0===h.options.minRange&&(h.minRange=Math.min(5*l,(this.maxX-this.minX)/5,h.minRange||e)),p&&void 0===p.options.minRange&&(p.minRange=Math.min(5*l,(this.maxY-this.minY)/5,p.minRange||e)))},getExtremes:function(){c.prototype.getExtremes.call(this,this.valueData),this.chart.hasRendered&&this.isDirtyData&&this.getBox(this.options.data),this.valueMin=this.dataMin,this.valueMax=this.dataMax,this.dataMin=this.minY,this.dataMax=this.maxY},translatePath:function(t){var i,o=!1,e=this.xAxis,a=this.yAxis,n=e.min,s=e.transA,e=e.minPixelPadding,r=a.min,l=a.transA,a=a.minPixelPadding,h=[];if(t)for(i=t.length;i--;)"number"==typeof t[i]?(h[i]=o?(t[i]-n)*s+e:(t[i]-r)*l+a,o=!o):h[i]=t[i];return h},setData:function(i,o){var e,a,n,s=this.options,r=s.mapData,l=s.joinBy,h=null===l,p=[];if(h&&(l="_i"),l=this.joinBy=t.splat(l),l[1]||(l[1]=l[0]),i&&x(i,function(t,o){"number"==typeof t&&(i[o]={value:t}),h&&(i[o]._i=o)}),this.getBox(i),r){if("FeatureCollection"===r.type){if(r["hc-transform"])for(e in this.chart.mapTransforms=a=r["hc-transform"],a)a.hasOwnProperty(e)&&e.rotation&&(e.cosAngle=Math.cos(e.rotation),e.sinAngle=Math.sin(e.rotation));r=t.geojson(r,this.type,this)}for(this.getBox(r),this.mapData=r,this.mapMap={},n=0;n<r.length;n++)e=r[n],a=e.properties,e._i=n,l[0]&&a&&a[l[0]]&&(e[l[0]]=a[l[0]]),this.mapMap[e[l[0]]]=e;s.allAreas&&(i=i||[],l[1]&&x(i,function(t){p.push(t[l[1]])}),p="|"+p.join("|")+"|",x(r,function(t){(!l[0]||-1===p.indexOf("|"+t[l[0]]+"|"))&&i.push(A(t,{value:null}))}))}c.prototype.setData.call(this,i,o)},drawGraph:X,drawDataLabels:X,doFullTranslate:function(){return this.isDirtyData||this.chart.isResizing||this.chart.renderer.isVML||!this.baseTrans},translate:function(){var t=this,i=t.xAxis,o=t.yAxis,e=t.doFullTranslate();t.generatePoints(),x(t.data,function(a){a.plotX=i.toPixels(a._midX,!0),a.plotY=o.toPixels(a._midY,!0),e&&(a.shapeType="path",a.shapeArgs={d:t.translatePath(a.path)},Y&&(a.shapeArgs["vector-effect"]="non-scaling-stroke"))}),t.translateColors()},drawPoints:function(){var t,i=this,o=i.xAxis,e=i.yAxis,a=i.group,n=i.chart,s=n.renderer,r=this.baseTrans;i.transformGroup||(i.transformGroup=s.g().attr({scaleX:1,scaleY:1}).add(a),i.transformGroup.survive=!0),i.doFullTranslate()?(n.hasRendered&&"color"===i.pointAttrToOptions.fill&&x(i.points,function(t){t.shapeArgs&&(t.shapeArgs.fill=t.pointAttr[M(t.state,"")].fill)}),Y||x(i.points,function(t){t=t.pointAttr[""],t["stroke-width"]===i.pointAttr[""]["stroke-width"]&&(t["stroke-width"]="inherit")}),i.group=i.transformGroup,C.column.prototype.drawPoints.apply(i),i.group=a,x(i.points,function(t){t.graphic&&(t.name&&t.graphic.addClass("highcharts-name-"+t.name.replace(" ","-").toLowerCase()),t.properties&&t.properties["hc-key"]&&t.graphic.addClass("highcharts-key-"+t.properties["hc-key"].toLowerCase()),Y||(t.graphic["stroke-widthSetter"]=X))}),this.baseTrans={originX:o.min-o.minPixelPadding/o.transA,originY:e.min-e.minPixelPadding/e.transA+(e.reversed?0:e.len/e.transA),transAX:o.transA,transAY:e.transA},this.transformGroup.animate({translateX:0,translateY:0,scaleX:1,scaleY:1})):(t=o.transA/r.transAX,a=e.transA/r.transAY,o=o.toPixels(r.originX,!0),e=e.toPixels(r.originY,!0),t>.99&&1.01>t&&a>.99&&1.01>a&&(a=t=1,o=Math.round(o),e=Math.round(e)),this.transformGroup.animate({translateX:o,translateY:e,scaleX:t,scaleY:a})),Y||i.group.element.setAttribute("stroke-width",i.options.borderWidth/(t||1)),this.drawMapDataLabels()},drawMapDataLabels:function(){c.prototype.drawDataLabels.call(this),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)},render:function(){var t=this,i=c.prototype.render;t.chart.renderer.isVML&&t.data.length>3e3?setTimeout(function(){i.call(t)}):i.call(t)},animate:function(t){var i=this.options.animation,o=this.group,e=this.xAxis,a=this.yAxis,n=e.pos,s=a.pos;this.chart.renderer.isSVG&&(i===!0&&(i={duration:1e3}),t?o.attr({translateX:n+e.len/2,translateY:s+a.len/2,scaleX:.001,scaleY:.001}):(o.animate({translateX:n,translateY:s,scaleX:1,scaleY:1},i),this.animate=null))},animateDrilldown:function(t){var i=this.chart.plotBox,o=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],e=o.bBox,a=this.chart.options.drilldown.animation;t||(t=Math.min(e.width/i.width,e.height/i.height),o.shapeArgs={scaleX:t,scaleY:t,translateX:e.x,translateY:e.y},x(this.points,function(t){t.graphic&&t.graphic.attr(o.shapeArgs).animate({scaleX:1,scaleY:1,translateX:0,translateY:0},a)}),this.animate=null)},drawLegendSymbol:h.drawRectangle,animateDrillupFrom:function(t){C.column.prototype.animateDrillupFrom.call(this,t)},animateDrillupTo:function(t){C.column.prototype.animateDrillupTo.call(this,t)}})),L.mapline=A(L.map,{lineWidth:1,fillColor:"none"}),C.mapline=b(C.map,{type:"mapline",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth",fill:"fillColor",dashstyle:"dashStyle"},drawLegendSymbol:C.line.prototype.drawLegendSymbol}),L.mappoint=A(L.scatter,{dataLabels:{enabled:!0,formatter:function(){return this.point.name},crop:!1,defer:!1,overflow:!1,style:{color:"#000000"}}}),C.mappoint=b(C.scatter,{type:"mappoint",forceDL:!0,pointClass:b(s,{applyOptions:function(t,i){var o=s.prototype.applyOptions.call(this,t,i);return void 0!==t.lat&&void 0!==t.lon&&(o=v(o,this.series.chart.fromLatLonToPoint(o))),o}})}),C.bubble&&(L.mapbubble=A(L.bubble,{animationLimit:500,tooltip:{pointFormat:"{point.name}: {point.z}"}}),C.mapbubble=b(C.bubble,{pointClass:b(s,{applyOptions:function(t,i){var o;return t&&void 0!==t.lat&&void 0!==t.lon?(o=s.prototype.applyOptions.call(this,t,i),o=v(o,this.series.chart.fromLatLonToPoint(o))):o=k.prototype.applyOptions.call(this,t,i),o},ttBelow:!1}),xyFromShape:!0,type:"mapbubble",pointArrayMap:["z"],getMapData:C.map.prototype.getMapData,getBox:C.map.prototype.getBox,setData:C.map.prototype.setData})),w.plotOptions.heatmap=A(w.plotOptions.scatter,{animation:!1,borderWidth:0,nullColor:"#F8F8F8",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{halo:!1,brightness:.2}}}),C.heatmap=b(C.scatter,A(D,{type:"heatmap",pointArrayMap:["y","value"],hasPointSpecificOptions:!0,pointClass:b(s,l),supportsDrilldown:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var t;C.scatter.prototype.init.apply(this,arguments),t=this.options,t.pointRange=M(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1},translate:function(){var t=this.options,i=this.xAxis,o=this.yAxis,e=function(t,i,o){return Math.min(Math.max(i,t),o)};this.generatePoints(),x(this.points,function(a){var n=(t.colsize||1)/2,s=(t.rowsize||1)/2,r=e(Math.round(i.len-i.translate(a.x-n,0,1,0,1)),0,i.len),n=e(Math.round(i.len-i.translate(a.x+n,0,1,0,1)),0,i.len),l=e(Math.round(o.translate(a.y-s,0,1,0,1)),0,o.len),s=e(Math.round(o.translate(a.y+s,0,1,0,1)),0,o.len);a.plotX=a.clientX=(r+n)/2,a.plotY=(l+s)/2,a.shapeType="rect",a.shapeArgs={x:Math.min(r,n),y:Math.min(l,s),width:Math.abs(n-r),height:Math.abs(s-l)}}),this.translateColors(),this.chart.hasRendered&&x(this.points,function(t){t.shapeArgs.fill=t.options.color||t.color})},drawPoints:C.column.prototype.drawPoints,animate:X,getBox:X,drawLegendSymbol:h.drawRectangle,getExtremes:function(){c.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,c.prototype.getExtremes.call(this)}})),a.prototype.transformFromLatLon=function(t,i){if(void 0===u.proj4)return y(21),{x:0,y:null};var o=u.proj4(i.crs,[t.lon,t.lat]),e=i.cosAngle||i.rotation&&Math.cos(i.rotation),a=i.sinAngle||i.rotation&&Math.sin(i.rotation),o=i.rotation?[o[0]*e+o[1]*a,-o[0]*a+o[1]*e]:o;return{x:((o[0]-(i.xoffset||0))*(i.scale||1)+(i.xpan||0))*(i.jsonres||1)+(i.jsonmarginX||0),y:(((i.yoffset||0)-o[1])*(i.scale||1)+(i.ypan||0))*(i.jsonres||1)-(i.jsonmarginY||0)}},a.prototype.transformToLatLon=function(t,i){if(void 0!==u.proj4){var o={x:((t.x-(i.jsonmarginX||0))/(i.jsonres||1)-(i.xpan||0))/(i.scale||1)+(i.xoffset||0),y:((-t.y-(i.jsonmarginY||0))/(i.jsonres||1)+(i.ypan||0))/(i.scale||1)+(i.yoffset||0)},e=i.cosAngle||i.rotation&&Math.cos(i.rotation),a=i.sinAngle||i.rotation&&Math.sin(i.rotation),o=u.proj4(i.crs,"WGS84",i.rotation?{x:o.x*e+o.y*-a,y:o.x*a+o.y*e}:o);return{lat:o.y,lon:o.x}}y(21)},a.prototype.fromPointToLatLon=function(t){var o,e=this.mapTransforms;if(e){for(o in e)if(e.hasOwnProperty(o)&&e[o].hitZone&&i({x:t.x,y:-t.y},e[o].hitZone.coordinates[0]))return this.transformToLatLon(t,e[o]);return this.transformToLatLon(t,e["default"])}y(22)},a.prototype.fromLatLonToPoint=function(t){var o,e,a=this.mapTransforms;if(!a)return y(22),{x:0,y:null};for(o in a)if(a.hasOwnProperty(o)&&a[o].hitZone&&(e=this.transformFromLatLon(t,a[o]),i({x:e.x,y:-e.y},a[o].hitZone.coordinates[0])))return e;return this.transformFromLatLon(t,a["default"])},t.geojson=function(t,i,o){var e=[],a=[],n=function(t){var i,o=t.length;for(a.push("M"),i=0;o>i;i++)1===i&&a.push("L"),a.push(t[i][0],-t[i][1])},i=i||"map";return x(t.features,function(t){var o,s=t.geometry,r=s.type,s=s.coordinates,t=t.properties;a=[],"map"===i||"mapbubble"===i?("Polygon"===r?(x(s,n),a.push("Z")):"MultiPolygon"===r&&(x(s,function(t){x(t,n)}),a.push("Z")),a.length&&(o={path:a})):"mapline"===i?("LineString"===r?n(s):"MultiLineString"===r&&x(s,n),a.length&&(o={path:a})):"mappoint"===i&&"Point"===r&&(o={x:s[0],y:-s[1]}),o&&e.push(v(o,{name:t.name||t.NAME,properties:t}))}),o&&t.copyrightShort&&(o.chart.mapCredits='<a href="http://www.highcharts.com">Highcharts</a> © <a href="'+t.copyrightUrl+'">'+t.copyrightShort+"</a>",o.chart.mapCreditsFull=t.copyright),e},P(a.prototype,"showCredits",function(t,i){w.credits.text===this.options.credits.text&&this.mapCredits&&(i.text=this.mapCredits,i.href=null),t.call(this,i),this.credits&&this.credits.attr({title:this.mapCreditsFull})}),v(w.lang,{zoomIn:"Zoom in",zoomOut:"Zoom out"}),w.mapNavigation={buttonOptions:{alignTo:"plotBox",align:"left",verticalAlign:"top",x:0,width:18,height:18,style:{fontSize:"15px",fontWeight:"bold",textAlign:"center"},theme:{"stroke-width":1}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:0},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:28}}},t.splitPath=function(t){var i,t=t.replace(/([A-Za-z])/g," $1 "),t=t.replace(/^\s*/,"").replace(/\s*$/,""),t=t.split(/[ ,]+/);for(i=0;i<t.length;i++)/[a-zA-Z]/.test(t[i])||(t[i]=parseFloat(t[i]));return t},t.maps={},m.prototype.symbols.topbutton=function(t,i,e,a,n){return o(t-1,i-1,e,a,n.r,n.r,0,0)},m.prototype.symbols.bottombutton=function(t,i,e,a,n){return o(t-1,i-1,e,a,0,0,n.r,n.r)},p===d&&x(["topbutton","bottombutton"],function(t){d.prototype.symbols[t]=m.prototype.symbols[t]}),t.Map=t.mapChart=function(t,i,o){var e,n="string"==typeof t||t.nodeName,s=arguments[n?1:0],r={endOnTick:!1,gridLineWidth:0,lineWidth:0,minPadding:0,maxPadding:0,startOnTick:!1,title:null,tickPositions:[]};return e=s.series,s.series=null,s=A({chart:{panning:"xy",type:"map"},xAxis:r,yAxis:A(r,{reversed:!0})},s,{chart:{inverted:!1,alignTicks:!1}}),s.series=e,n?new a(t,s,o):new a(s,i)}});